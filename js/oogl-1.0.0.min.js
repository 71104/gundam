!function(a,b){b.OOGL=a;var c=function(a){"function"==typeof a&&document.addEventListener("DOMContentLoaded",function(){a.call(c,c)},!1)};"undefined"==typeof $&&($=c),c.Timing={now:function(){return"performance"in window&&"now"in window.performance?function(){return window.performance.now()}:function(){return Date.now()}}()},c.Ajax=new function(){function a(a){var b="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return b.onreadystatechange=a,b}function b(b,c,e){var f=new a(function(){4===f.readyState&&(200===f.status?e&&e(f.responseText):d())});f.open(b,c),f.send()}function c(b,c,e){var f=new a(function(){4===f.readyState&&(200===f.status?e&&e(JSON.parse(f.responseText)):d())});f.open(b,c),f.send()}var d=function(){};this.onError=function(a){d=a||function(){}},this.get=function(a,c){b("GET",a,c)},this.getJSON=function(a,b){c("GET",a,b)},this.post=function(a,c){b("POST",a,c)},this.postJSON=function(a,b){c("POST",a,b)},this.put=function(a,c){b("PUT",a,c)},this.putJSON=function(a,b){c("PUT",a,b)},this._delete=function(a,c){b("DELETE",a,c)},this.deleteJSON=function(a,b){c("DELETE",a,b)}},c.Loader=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);this.queue=function(){a.push.apply(a,arguments)},this.queueSync=function(){for(var b=0;b<arguments.length;b++)!function(b){a.push(function(a){arguments[b](),a()})}(b)},this.count=function(){return a.length},this.start=function(b){!function c(d){d<a.length?a[d](function(){c(d+1)}):b&&b()}(0)}},c.Vector2=function(a,b){this.x=a,this.y=b},c.Vector2.prototype={clone:function(){return new c.Vector2(this.x,this.y)},toArray:function(){return[this.x,this.y]},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y);return this.x/=a,this.y/=a,this},getNormalized:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y);return new c.Vector2(this.x/a,this.y/a)},add:function(a){return this.x+=a.x,this.y+=a.y,this},plus:function(a){return new c.Vector2(this.x+a.x,this.y+a.y)},subtract:function(a){return this.x-=a.x,this.y-=a.y,this},minus:function(a){return new c.Vector2(this.x-a.x,this.y-a.y)},multiply:function(a){return this.x*=a,this.y*=a,this},divide:function(a){return this.x/=a,this.y/=a,this},by:function(a){return new c.Vector2(this.x*a,this.y*a)},dot:function(a){return this.x*a.x+this.y*a.y},reflect:function(a){var b=this.x*a.x+this.y*a.y;return this.x-=2*b*a.x,this.y-=2*b*a.y,this},getReflected:function(a){var b=this.x*a.x+this.y*a.y;return new c.Vector2(this.x-2*b*a.x,this.y-2*b*a.y)},refract:function(a,b){var c=this.x*a.x+this.y*a.y,d=1-b*b*(1-c*c);return 0>d?(this.x=0,this.y=0):(this.x=b*this.x-(b*c+Math.sqrt(d))*a.x,this.y=b*this.y-(b*c+Math.sqrt(d))*a.y),this},getRefracted:function(a,b){var d=this.x*a.x+this.y*a.y,e=1-b*b*(1-d*d);return 0>e?c.Vector2.NULL:new c.Vector2(b*this.x-(b*d+Math.sqrt(e))*a.x,b*this.y-(b*d+Math.sqrt(e))*a.y)}},c.Vector2.NULL=new c.Vector2(0,0),c.Vector2.I=new c.Vector2(1,0),c.Vector2.J=new c.Vector2(0,1),c.Vector3=function(a,b,c){this.x=a,this.y=b,this.z=c},c.Vector3.prototype={clone:function(){return new c.Vector3(this.x,this.y,this.z)},toArray:function(){return[this.x,this.y,this.z]},toHomogeneous:function(){return new c.Vector4(this.x,this.y,this.z,1)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return this.x/=a,this.y/=a,this.z/=a,this},getNormal:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return new c.Vector3(this.x/a,this.y/a,this.z/a)},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},plus:function(a){return new c.Vector3(this.x+a.x,this.y+a.y,this.z+a.z)},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this},minus:function(a){return new c.Vector3(this.x-a.x,this.y-a.y,this.z-a.z)},multiply:function(a){return this.x*=a,this.y*=a,this.z*=a,this},divide:function(a){return this.x/=a,this.y/=a,this.z/=a,this},by:function(a){return new c.Vector3(this.x*a,this.y*a,this.z*a)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},cross:function(a){var b=this.y*a.z-this.z*a.y,c=this.z*a.x-this.x*a.z,d=this.x*a.y-this.y*a.x;return this.x=b,this.y=c,this.z=d,this},getCrossProduct:function(a){return new c.Vector3(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},reflect:function(a){var b=this.x*a.x+this.y*a.y+this.z*a.z;return this.x-=2*b*a.x,this.y-=2*b*a.y,this.z-=2*b*a.z,this},getReflected:function(a){var b=this.x*a.x+this.y*a.y+this.z*a.z;return new c.Vector3(this.x-2*b*a.x,this.y-2*b*a.y,this.z-2*b*a.z)},refract:function(a,b){var c=this.x*a.x+this.y*a.y+this.z*a.z,d=1-b*b*(1-c*c);return 0>d?(this.x=0,this.y=0,this.z=0):(this.x=b*this.x-(b*c+Math.sqrt(d))*a.x,this.y=b*this.y-(b*c+Math.sqrt(d))*a.y,this.z=b*this.z-(b*c+Math.sqrt(d))*a.z),this},getRefracted:function(a,b){var d=this.x*a.x+this.y*a.y+this.z*a.z,e=1-b*b*(1-d*d);return 0>e?c.Vector3.NULL:new c.Vector3(b*this.x-(b*d+Math.sqrt(e))*a.x,b*this.y-(b*d+Math.sqrt(e))*a.y,b*this.z-(b*d+Math.sqrt(e))*a.z)}},c.Vector3.NULL=new c.Vector3(0,0,0),c.Vector3.I=new c.Vector3(1,0,0),c.Vector3.J=new c.Vector3(0,1,0),c.Vector3.K=new c.Vector3(0,0,1),c.Vector4=function(a,b,c,d){this.x=a,this.y=b,this.z=c,this.w=d},c.Vector4.prototype={clone:function(){return new c.Vector4(this.x,this.y,this.z,this.w)},toArray:function(){return[this.x,this.y,this.z,this.w]},toStandard:function(){return new c.Vector3(this.x/this.w,this.y/this.w,this.z/this.w)}},c.Matrix2=function(a){if(4!=a.length)throw"A 2x2 matrix must have exactly 4 elements.";for(var b=0;4>b;b++)this[b]=a[b]},c.Matrix2.prototype={clone:function(){return new c.Matrix2([this[0],this[1],this[2],this[3]])},get:function(a,b){return this[2*b+a]},put:function(a,b,c){return this[2*b+a]=c,this},transpose:function(){for(var a=[this[0],this[2],this[1],this[3]],b=0;4>b;b++)this[b]=a[b];return this},getTransposed:function(){return new c.Matrix2([this[0],this[2],this[1],this[3]])},add:function(a){for(var b=0;4>b;b++)this[b]+=a[b];return this},plus:function(a){for(var b=[],d=0;4>d;d++)b.push(this[d]+a[d]);return new c.Matrix2(b)},subtract:function(a){for(var b=0;4>b;b++)this[b]-=a[b];return this},minus:function(a){for(var b=[],d=0;4>d;d++)b.push(this[d]-a[d]);return new c.Matrix2(b)},multiply:function(a){for(var b=0;4>b;b++)this[b]*=a;return this},by:function(a){if(a instanceof c.Vector2)return new c.Vector2(this[0]*a.x+this[2]*a.y,this[1]*a.x+this[3]*a.y);if(a instanceof c.Matrix2)return new c.Matrix2([this[0]*a[0]+this[2]*a[1],this[1]*a[0]+this[3]*a[1],this[0]*a[2]+this[2]*a[3],this[1]*a[2]+this[3]*a[3]]);for(var b=[],d=0;4>d;d++)b.push(this[d]*a);return new c.Matrix2(b)},determinant:function(){return this[0]*this[3]-this[1]*this[2]},invert:function(){for(var a=this[0]*this[3]-this[1]*this[2],b=[this[3]/a,this[2]/a,this[1]/a,this[0]/a],c=0;4>c;c++)this[c]=b[c];return this},getInverse:function(){var a=this[0]*this[3]-this[1]*this[2];return new c.Matrix2([this[3]/a,this[2]/a,this[1]/a,this[0]/a])}},c.Matrix2.NULL=new c.Matrix2([0,0,0,0]),c.Matrix2.IDENTITY=new c.Matrix2([1,0,0,1]),c.RotationMatrix2=function(a){var b=Math.sin(a),d=Math.cos(a);return new c.Matrix2([d,b,-b,d])},c.ScalingMatrix2=function(a,b){return new c.Matrix2([a,0,0,b])},c.Matrix3=function(a){if(9!=a.length)throw"A 3x3 matrix must have exactly 9 elements.";for(var b=0;9>b;b++)this[b]=a[b]},c.Matrix3.prototype={clone:function(){return new c.Matrix3([this[0],this[1],this[2],this[3],this[4],this[5],this[6],this[7],this[8]])},toHomogeneous:function(){return new c.Matrix4([this[0],this[1],this[2],0,this[3],this[4],this[5],0,this[6],this[7],this[8],0,0,0,0,1])},get:function(a,b){return this[3*b+a]},put:function(a,b,c){return this[3*b+a]=c,this},transpose:function(){for(var a=[this[0],this[3],this[6],this[1],this[4],this[7],this[2],this[5],this[8]],b=0;9>b;b++)this[b]=a[b];return this},getTransposed:function(){return new c.Matrix3([this[0],this[3],this[6],this[1],this[4],this[7],this[2],this[5],this[8]])},add:function(a){for(var b=0;9>b;b++)this[b]+=a[b];return this},plus:function(a){for(var b=[],d=0;9>d;d++)b.push(this[d]+a[d]);return new c.Matrix3(b)},subtract:function(a){for(var b=0;9>b;b++)this[b]-=a[b];return this},minus:function(a){for(var b=[],d=0;9>d;d++)b.push(this[d]-a[d]);return new c.Matrix3(b)},multiply:function(a){var b;if(a instanceof c.Matrix3){var d=[this[0]*a[0]+this[3]*a[1]+this[6]*a[2],this[1]*a[0]+this[4]*a[1]+this[7]*a[2],this[2]*a[0]+this[5]*a[1]+this[8]*a[2],this[0]*a[3]+this[3]*a[4]+this[6]*a[5],this[1]*a[3]+this[4]*a[4]+this[7]*a[5],this[2]*a[3]+this[5]*a[4]+this[8]*a[5],this[0]*a[6]+this[3]*a[7]+this[6]*a[8],this[1]*a[6]+this[4]*a[7]+this[7]*a[8],this[2]*a[6]+this[5]*a[7]+this[8]*a[8]];for(b=0;9>b;b++)this[b]=d[b]}else for(b=0;9>b;b++)this[b]*=a;return this},by:function(a){if(a instanceof c.Matrix3)return new c.Matrix3([this[0]*a[0]+this[3]*a[1]+this[6]*a[2],this[1]*a[0]+this[4]*a[1]+this[7]*a[2],this[2]*a[0]+this[5]*a[1]+this[8]*a[2],this[0]*a[3]+this[3]*a[4]+this[6]*a[5],this[1]*a[3]+this[4]*a[4]+this[7]*a[5],this[2]*a[3]+this[5]*a[4]+this[8]*a[5],this[0]*a[6]+this[3]*a[7]+this[6]*a[8],this[1]*a[6]+this[4]*a[7]+this[7]*a[8],this[2]*a[6]+this[5]*a[7]+this[8]*a[8]]);if(a instanceof c.Vector3)return new c.Vector3(this[0]*a.x+this[3]*a.y+this[6]*a.z,this[1]*a.x+this[4]*a.y+this[7]*a.z,this[2]*a.x+this[5]*a.y+this[8]*a.z);for(var b=[],d=0;9>d;d++)b.push(this[d]*a);return new c.Matrix3(b)},determinant:function(){return this[0]*(this[4]*this[8]-this[5]*this[7])-this[3]*(this[1]*this[8]-this[2]*this[7])+this[6]*(this[1]*this[5]-this[2]*this[4])},invert:function(){for(var a=this[0]*(this[4]*this[8]-this[5]*this[7])-this[3]*(this[1]*this[8]-this[2]*this[7])+this[6]*(this[1]*this[5]-this[2]*this[4]),b=[(this[4]*this[8]-this[5]*this[7])/a,(this[2]*this[7]-this[1]*this[8])/a,(this[1]*this[5]-this[2]*this[4])/a,(this[5]*this[6]-this[3]*this[8])/a,(this[0]*this[8]-this[2]*this[6])/a,(this[2]*this[3]-this[0]*this[5])/a,(this[3]*this[7]-this[4]*this[6])/a,(this[1]*this[6]-this[0]*this[7])/a,(this[0]*this[4]-this[1]*this[3])/a],c=0;9>c;c++)this[c]=b[c];return this},getInverse:function(){var a=this[0]*(this[4]*this[8]-this[5]*this[7])-this[3]*(this[1]*this[8]-this[2]*this[7])+this[6]*(this[1]*this[5]-this[2]*this[4]);return new c.Matrix3([(this[4]*this[8]-this[5]*this[7])/a,(this[2]*this[7]-this[1]*this[8])/a,(this[1]*this[5]-this[2]*this[4])/a,(this[5]*this[6]-this[3]*this[8])/a,(this[0]*this[8]-this[2]*this[6])/a,(this[2]*this[3]-this[0]*this[5])/a,(this[3]*this[7]-this[4]*this[6])/a,(this[1]*this[6]-this[0]*this[7])/a,(this[0]*this[4]-this[1]*this[3])/a])}},c.Matrix3.NULL=new c.Matrix3([0,0,0,0,0,0,0,0,0]),c.Matrix3.IDENTITY=new c.Matrix3([1,0,0,0,1,0,0,0,1]),c.RotationMatrix3=function(a,b,d,e){var f=Math.sin(e),g=Math.cos(e);return new c.Matrix3([g+a*a*(1-g),a*b*(1-g)-d*f,a*d*(1-g)+b*f,b*a*(1-g)+d*f,g+b*b*(1-g),b*d*(1-g)-a*f,d*a*(1-g)-b*f,d*b*(1-g)+a*f,g+d*d*(1-g)])},c.ScalingMatrix3=function(a,b,d){return new c.Matrix3([a,0,0,0,b,0,0,0,d])},c.Matrix4=function(a){if(16!=a.length)throw"A 4x4 matrix must have exactly 16 elements.";for(var b=0;16>b;b++)this[b]=a[b]},c.Matrix4.prototype={clone:function(){return new c.Matrix4([this[0],this[1],this[2],this[3],this[4],this[5],this[6],this[7],this[8],this[9],this[10],this[11],this[12],this[13],this[14],this[15]])},get:function(a,b){return this[4*b+a]},put:function(a,b,c){return this[4*b+a]=c,this}},c.TranslationMatrix4=function(a,b,d){return new c.Matrix4([1,0,0,0,0,1,0,0,0,0,1,0,a,b,d,1])},c.RotationMatrix4=function(a,b,d,e){var f=Math.sin(e),g=Math.cos(e);return new c.Matrix4([g+a*a*(1-g),a*b*(1-g)-d*f,a*d*(1-g)+b*f,0,b*a*(1-g)+d*f,g+b*b*(1-g),b*d*(1-g)-a*f,0,d*a*(1-g)-b*f,d*b*(1-g)+a*f,g+d*d*(1-g),0,0,0,0,1])},c.ScalingMatrix4=function(a,b,d){return new c.Matrix4([a,0,0,0,0,b,0,0,0,0,d,0,0,0,0,1])},c.OrthogonalProjection=function(a){return arguments.length<1&&(a=1),new c.Matrix4([1,0,0,0,0,a,0,0,0,0,1,0,0,0,0,1])},c.IsometricProjection=function(){},c.PerspectiveProjection=function(a,b){arguments.length<2&&(b=Math.PI/2,arguments.length<1&&(a=1));var d=Math.cos(b/2);return new c.Matrix4([d,0,0,0,0,d*a,0,0,0,0,0,1,0,0,1,d])},c.Context=function(a,b){var d;d="string"!=typeof a?a:document.getElementById(a);var e=d.getContext("webgl",b);if(e||(e=d.getContext("experimental-webgl",b)),!e)throw"WebGL not supported.";return e.Buffer=function(){var a={"byte":{constructor:Int8Array,size:1},ubyte:{constructor:Uint8Array,size:1},"short":{constructor:Int16Array,size:2},ushort:{constructor:Uint16Array,size:2},"float":{constructor:Float32Array,size:4}};return function(b,c,d){var f;if(!a.hasOwnProperty(c))throw'Invalid buffer type, must be one of "byte", "ubyte", "short", "ushort" and "float".';f=a[c].constructor;var g=e.createBuffer();return g.is=function(){return e.isBuffer(g)},g.getParameter=function(a){return e.getBufferParameter(b,a)},g.getSize=function(){return e.getBufferParameter(b,e.BUFFER_SIZE)},g.getUsage=function(){return e.getBufferParameter(b,e.BUFFER_USAGE)},g.bind=function(){e.bindBuffer(b,g)},g.data=function(f){"number"!=typeof f&&(f=new a[c].constructor(f)),e.bufferData(b,f,d)},g.bindAndData=function(f){e.bindBuffer(b,g),"number"!=typeof f&&(f=new a[c].constructor(f)),e.bufferData(b,f,d)},g.subData=function(d,f){e.bufferSubData(b,d*a[c].size,new a[c].constructor(f))},g._delete=function(){e.deleteBuffer(g)},g}}(),e.StaticBuffer=function(a,b){return new e.Buffer(a,b,e.STATIC_DRAW)},e.StreamBuffer=function(a,b){return new e.Buffer(a,b,e.STREAM_DRAW)},e.DynamicBuffer=function(a,b){return new e.Buffer(a,b,e.DYNAMIC_DRAW)},e.ArrayBuffer=function(a,b){return new e.Buffer(e.ARRAY_BUFFER,a,b)},e.ElementArrayBuffer=function(a,b){return new e.Buffer(e.ELEMENT_ARRAY_BUFFER,a,b)},e.StaticArrayBuffer=function(a){return new e.StaticBuffer(e.ARRAY_BUFFER,a)},e.StaticElementArrayBuffer=function(a){return new e.StaticBuffer(e.ELEMENT_ARRAY_BUFFER,a)},e.StreamArrayBuffer=function(a){return new e.StreamBuffer(e.ARRAY_BUFFER,a)},e.StreamElementArrayBuffer=function(a){return new e.StreamBuffer(e.ELEMENT_ARRAY_BUFFER,a)},e.DynamicArrayBuffer=function(a){return new e.DynamicBuffer(e.ARRAY_BUFFER,a)},e.DynamicElementArrayBuffer=function(a){return new e.DynamicBuffer(e.ELEMENT_ARRAY_BUFFER,a)},e.AttributeArray1=function(a,b,c,d){var f={"byte":{glType:e.BYTE,size:1},ubyte:{glType:e.UNSIGNED_BYTE,size:1},"short":{glType:e.SHORT,size:2},ushort:{glType:e.UNSIGNED_SHORT,size:2},"float":{glType:e.FLOAT,size:4}};if(!f.hasOwnProperty(b))throw'Invalid attribute type, must be one of "byte", "ubyte", "short", "ushort" and "float".';var g=new e.StaticArrayBuffer(b);return g.bindAndData(c),g.enable=function(){e.enableVertexAttribArray(a)},g.disable=function(){e.disableVertexAttribArray(a)},g.pointer=function(c,g){e.vertexAttribPointer(a,1,f[b].glType,!!d,(c||0)*f[b].size,(g||0)*f[b].size)},g.bindAndPointer=function(c,h){e.bindBuffer(e.ARRAY_BUFFER,g),e.vertexAttribPointer(a,1,f[b].glType,!!d,(c||0)*f[b].size,(h||0)*f[b].size)},g.enableBindAndPointer=function(c,h){e.enableVertexAttribArray(a),e.bindBuffer(e.ARRAY_BUFFER,g),e.vertexAttribPointer(a,1,f[b].glType,!!d,(c||0)*f[b].size,(h||0)*f[b].size)},g},e.AttributeArray2=function(a,b,c,d){var f={"byte":{glType:e.BYTE,size:1},ubyte:{glType:e.UNSIGNED_BYTE,size:1},"short":{glType:e.SHORT,size:2},ushort:{glType:e.UNSIGNED_SHORT,size:2},"float":{glType:e.FLOAT,size:4}};if(!f.hasOwnProperty(b))throw'Invalid attribute type, must be one of "byte", "ubyte", "short", "ushort" and "float".';var g=new e.StaticArrayBuffer(b);return g.bindAndData(c),g.enable=function(){e.enableVertexAttribArray(a)},g.disable=function(){e.disableVertexAttribArray(a)},g.pointer=function(c,g){e.vertexAttribPointer(a,2,f[b].glType,!!d,(c||0)*f[b].size,(g||0)*f[b].size)},g.bindAndPointer=function(c,h){e.bindBuffer(e.ARRAY_BUFFER,g),e.vertexAttribPointer(a,2,f[b].glType,!!d,(c||0)*f[b].size,(h||0)*f[b].size)},g.enableBindAndPointer=function(c,h){e.enableVertexAttribArray(a),e.bindBuffer(e.ARRAY_BUFFER,g),e.vertexAttribPointer(a,2,f[b].glType,!!d,(c||0)*f[b].size,(h||0)*f[b].size)},g},e.AttributeArray3=function(a,b,c,d){var f={"byte":{glType:e.BYTE,size:1},ubyte:{glType:e.UNSIGNED_BYTE,size:1},"short":{glType:e.SHORT,size:2},ushort:{glType:e.UNSIGNED_SHORT,size:2},"float":{glType:e.FLOAT,size:4}};if(!f.hasOwnProperty(b))throw'Invalid attribute type, must be one of "byte", "ubyte", "short", "ushort" and "float".';var g=new e.StaticArrayBuffer(b);return g.bindAndData(c),g.enable=function(){e.enableVertexAttribArray(a)},g.disable=function(){e.disableVertexAttribArray(a)},g.pointer=function(c,g){e.vertexAttribPointer(a,3,f[b].glType,!!d,(c||0)*f[b].size,(g||0)*f[b].size)},g.bindAndPointer=function(c,h){e.bindBuffer(e.ARRAY_BUFFER,g),e.vertexAttribPointer(a,3,f[b].glType,!!d,(c||0)*f[b].size,(h||0)*f[b].size)},g.enableBindAndPointer=function(c,h){e.enableVertexAttribArray(a),e.bindBuffer(e.ARRAY_BUFFER,g),e.vertexAttribPointer(a,3,f[b].glType,!!d,(c||0)*f[b].size,(h||0)*f[b].size)},g},e.AttributeArray4=function(a,b,c,d){var f={"byte":{glType:e.BYTE,size:1},ubyte:{glType:e.UNSIGNED_BYTE,size:1},"short":{glType:e.SHORT,size:2},ushort:{glType:e.UNSIGNED_SHORT,size:2},"float":{glType:e.FLOAT,size:4}};if(!f.hasOwnProperty(b))throw'Invalid attribute type, must be one of "byte", "ubyte", "short", "ushort" and "float".';var g=new e.StaticArrayBuffer(b);return g.bindAndData(c),g.enable=function(){e.enableVertexAttribArray(a)},g.disable=function(){e.disableVertexAttribArray(a)},g.pointer=function(c,g){e.vertexAttribPointer(a,4,f[b].glType,!!d,(c||0)*f[b].size,(g||0)*f[b].size)},g.bindAndPointer=function(c,h){e.bindBuffer(e.ARRAY_BUFFER,g),e.vertexAttribPointer(a,4,f[b].glType,!!d,(c||0)*f[b].size,(h||0)*f[b].size)},g.enableBindAndPointer=function(c,h){e.enableVertexAttribArray(a),e.bindBuffer(e.ARRAY_BUFFER,g),e.vertexAttribPointer(a,4,f[b].glType,!!d,(c||0)*f[b].size,(h||0)*f[b].size)},g},e.AttributeArrays=function(a){var b=[];return{add1:function(a,c,d){b.push(new e.AttributeArray1(b.length,a,c,d))},add1b:function(a,c){b.push(new e.AttributeArray1(b.length,"byte",a,c))},add1ub:function(a,c){b.push(new e.AttributeArray1(b.length,"ubyte",a,c))},add1s:function(a,c){b.push(new e.AttributeArray1(b.length,"short",a,c))},add1us:function(a,c){b.push(new e.AttributeArray1(b.length,"ushort",a,c))},add1f:function(a,c){b.push(new e.AttributeArray1(b.length,"float",a,c))},add2:function(a,c,d){b.push(new e.AttributeArray2(b.length,a,c,d))},add2b:function(a,c){b.push(new e.AttributeArray2(b.length,"byte",a,c))},add2ub:function(a,c){b.push(new e.AttributeArray2(b.length,"ubyte",a,c))},add2s:function(a,c){b.push(new e.AttributeArray2(b.length,"short",a,c))},add2us:function(a,c){b.push(new e.AttributeArray2(b.length,"ushort",a,c))},add2f:function(a,c){b.push(new e.AttributeArray2(b.length,"float",a,c))},add3:function(a,c,d){b.push(new e.AttributeArray3(b.length,a,c,d))},add3b:function(a,c){b.push(new e.AttributeArray3(b.length,"byte",a,c))},add3ub:function(a,c){b.push(new e.AttributeArray3(b.length,"ubyte",a,c))},add3s:function(a,c){b.push(new e.AttributeArray3(b.length,"short",a,c))},add3us:function(a,c){b.push(new e.AttributeArray3(b.length,"ushort",a,c))},add3f:function(a,c){b.push(new e.AttributeArray3(b.length,"float",a,c))},add4:function(a,c,d){b.push(new e.AttributeArray4(b.length,a,c,d))},add4b:function(a,c){b.push(new e.AttributeArray3(b.length,"byte",a,c))},add4ub:function(a,c){b.push(new e.AttributeArray3(b.length,"ubyte",a,c))},add4s:function(a,c){b.push(new e.AttributeArray3(b.length,"short",a,c))},add4us:function(a,c){b.push(new e.AttributeArray3(b.length,"ushort",a,c))},add4f:function(a,c){b.push(new e.AttributeArray3(b.length,"float",a,c))},enable:function(){for(var a=0;a<b.length;a++)e.enableVertexAttribArray(a)},disable:function(){for(var a=0;a<b.length;a++)e.disableVertexAttribArray(a)},bindAndPointer:function(a,c){for(var d in b)b.hasOwnProperty(d)&&b[d].bindAndPointer(a,c)},enableBindAndPointer:function(a,c){for(var d=0;d<b.length;d++)e.enableVertexAttribArray(d),b[d].bindAndPointer(a,c)},drawTriangles:function(a){return function(b,c){arguments.length<2&&(c=a,arguments.length<1&&(b=0)),e.drawArrays(e.TRIANGLES,b,c)}}(a),drawTriangleFan:function(a){return function(b,c){arguments.length<2&&(c=a,arguments.length<1&&(b=0)),e.drawArrays(e.TRIANGLE_FAN,b,c)}}(a),drawTriangleStrip:function(a){return function(b,c){arguments.length<2&&(c=a,arguments.length<1&&(b=0)),e.drawArrays(e.TRIANGLE_STRIP,b,c)}}(a),_delete:function(){for(var a in b)b.hasOwnProperty(a)&&b[a]._delete()}}},e.ElementArray=function(a,b){b||(b="ushort");var c=a.length,d={ubyte:e.UNSIGNED_BYTE,ushort:e.UNSIGNED_SHORT};if(!d.hasOwnProperty(b))throw'Invalid element type, must be either "ubyte" or "ushort".';var f=new e.StaticElementArrayBuffer(b);return f.bindAndData(a),f.drawTriangles=function(a){return function(c,f){arguments.length<2&&(f=a,arguments.length<1&&(c=0)),e.drawElements(e.TRIANGLES,f,d[b],c)}}(c),f.drawTriangleFan=function(a){return function(c,f){arguments.length<2&&(f=a,arguments.length<1&&(c=0)),e.drawElements(e.TRIANGLE_FAN,f,d[b],c)}}(c),f.drawTriangleStrip=function(a){return function(c,f){arguments.length<2&&(f=a,arguments.length<1&&(c=0)),e.drawElements(e.TRIANGLE_STRIP,f,d[b],c)}}(c),f},e.Texture=function(a){var b=e.createTexture();return b.is=function(){return e.isTexture(b)},b.bind=function(){e.bindTexture(a,b)},b.getParameter=function(b){return e.getTexParameter(a,b)},b.getMinFilter=function(){return e.getTexParameter(a,e.TEXTURE_MIN_FILTER)},b.getMagFilter=function(){return e.getTexParameter(a,e.TEXTURE_MAG_FILTER)},b.getWrapS=function(){return e.getTexParameter(a,e.TEXTURE_WRAP_S)},b.getWrapT=function(){return e.getTexParameter(a,e.TEXTURE_WRAP_T)},b.parameterf=function(b,c){e.texParameterf(a,b,c)},b.parameteri=function(b,c){e.texParameteri(a,b,c)},b.setMinFilter=function(b){e.texParameteri(a,e.TEXTURE_MIN_FILTER,b)},b.setMagFilter=function(b){e.texParameteri(a,e.TEXTURE_MAG_FILTER,b)},b.setWrapS=function(b){e.texParameteri(a,e.TEXTURE_WRAP_S,b)},b.setWrapT=function(b){e.texParameteri(a,e.TEXTURE_WRAP_T,b)},b.generateMipmap=function(){e.generateMipmap(a)},b.image2D=function(b,c,d,f){e.texImage2D(a,b,c,c,d,f)},b.subImage2D=function(b,c,d,f,g,h,i,j){e.texSubImage2D(a,b,c,d,f,g,h,i,j)},b.copyImage2D=function(b,c,d,f,g,h){e.copyTexImage2D(a,b,c,d,f,g,h,0)},b.copySubImage2D=function(b,c,d,f,g,h,i){e.copyTexSubImage2D(a,b,c,d,f,g,h,i)},b._delete=function(){e.deleteTexture(b)},b},e.Texture2D=function(){return new e.Texture(e.TEXTURE_2D)},e.AutoTexture=function(a,b,c){var d=new e.Texture2D;return d.bind(),arguments.length>1?(d.setMagFilter(b),arguments.length>2?d.setMinFilter(c):d.setMinFilter(e.LINEAR)):(d.setMagFilter(e.LINEAR),d.setMinFilter(e.LINEAR)),d.image2D(0,e.RGBA,e.UNSIGNED_BYTE,a),d},e.AsyncTexture=function(a,b,c,d){var f=new e.Texture2D;return f.bind(),arguments.length>2?(f.setMagFilter(c),arguments.length>3?f.setMinFilter(d):f.setMinFilter(e.LINEAR)):(f.setMagFilter(e.LINEAR),f.setMinFilter(e.LINEAR)),f.image=new Image,f.image.addEventListener("load",function(){f.image2D(0,e.RGBA,e.UNSIGNED_BYTE,f.image),b&&b.call(f)},!1),f.image.src=a,f},e.CubeMap=function(){return new e.Texture(e.TEXTURE_CUBE_MAP)},e.AsyncCubeMap=function(a,b,d,f){function g(b,c){return function(d){var f=new Image;f.addEventListener("load",function(){e.texImage2D(c,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,f),d()},!1),f.src=a.replace("%1",b)}}var h=new e.CubeMap;return h.bind(),arguments.length>2?(h.setMagFilter(d),arguments.length>3?h.setMinFilter(f):h.setMinFilter(e.LINEAR)):(h.setMagFilter(e.LINEAR),h.setMinFilter(e.LINEAR)),new c.Loader(g("+X",e.TEXTURE_CUBE_MAP_POSITIVE_X),g("+Y",e.TEXTURE_CUBE_MAP_POSITIVE_Y),g("+Z",e.TEXTURE_CUBE_MAP_POSITIVE_Z),g("-X",e.TEXTURE_CUBE_MAP_NEGATIVE_X),g("-Y",e.TEXTURE_CUBE_MAP_NEGATIVE_Y),g("-Z",e.TEXTURE_CUBE_MAP_NEGATIVE_Z)).start(b),h},e.Textures=function(a){var b={},c=[];for(var d in a)a.hasOwnProperty(d)&&(b[d]=!0,c.push({name:d,texture:a[d]}));return{add:function(a,d){if(b.hasOwnProperty(a)){for(var e in c)if(c.hasOwnProperty(e)&&c[e].name==a)return c[e].texture=d,void 0}else b[a]=!0,c.push({name:a,texture:d})},bind:function(){for(var a=0;a<c.length;a++)e.activeTexture(e.TEXTURE0+a),c[a].texture.bind()},uniform:function(a){for(var b=0;b<c.length;b++)a.uniform1i(c[b].name,b)},bindAndUniform:function(a){for(var b=0;b<c.length;b++)e.activeTexture(e.TEXTURE0+b),c[b].texture.bind(),a.uniform1i(c[b].name,b)},_delete:function(){for(var a in c)c.hasOwnProperty(a)&&c[a].texture._delete();b={},c=[]}}},e.Shader=function(a){var b=e.createShader(a);return b.getParameter=function(a){return e.getShaderParameter(b,a)},b.getType=function(){return e.getShaderParameter(b,e.SHADER_TYPE)},b.source=function(a){e.shaderSource(b,a)},b.getSource=function(){return e.getShaderParameter(b,e.SHADER_SOURCE)},b.compile=function(){e.compileShader(b)},b.getCompileStatus=function(){return e.getShaderParameter(b,e.COMPILE_STATUS)},b.getInfoLog=function(){return e.getShaderInfoLog(b)},b.compileOrThrow=function(){if(e.compileShader(b),!e.getShaderParameter(b,e.COMPILE_STATUS))throw e.getShaderInfoLog(b)},b._delete=function(){e.deleteShader(b)},b.getDeleteStatus=function(){return e.getShaderParameter(b,e.DELETE_STATUS)},b},e.VertexShader=function(a){var b=new e.Shader(e.VERTEX_SHADER);return a&&(b.source(a),b.compileOrThrow()),b},e.FragmentShader=function(a){var b=new e.Shader(e.FRAGMENT_SHADER);return a&&(b.source(a),b.compileOrThrow()),b},e.AjaxVertexShader=function(a,b){var d=new e.Shader(e.VERTEX_SHADER);return c.Ajax.get(a,function(a){d.source(a),d.compileOrThrow(),b&&b.call(d)}),d},e.AjaxFragmentShader=function(a,b){var d=new e.Shader(e.FRAGMENT_SHADER);return c.Ajax.get(a,function(a){d.source(a),d.compileOrThrow(),b&&b.call(d)}),d},e.Program=function(){function a(a){return c[a]=e.getUniformLocation(b,a)}var b=e.createProgram(),c={};return b.getParameter=function(a){return e.getProgramParameter(b,a)},b.attachShader=function(a){e.attachShader(b,a)},b.detachShader=function(a){e.detachShader(b,a)},b.getAttachedShaders=function(){return e.getAttachedShaders(b)},b.getNumberOfAttachedShaders=function(){return e.getProgramParameter(b,e.ATTACHED_SHADERS)},b.bindAttribLocation=function(a,c){e.bindAttribLocation(b,a,c)},b.bindAttribLocations=function(a){for(var c in a)a.hasOwnProperty(c)&&e.bindAttribLocation(b,parseInt(c,10),a[c])},b.link=function(){c={},e.linkProgram(b)},b.getLinkStatus=function(){return e.getProgramParameter(b,e.LINK_STATUS)},b.getInfoLog=function(){return e.getProgramInfoLog(b)},b.linkOrThrow=function(){if(c={},e.linkProgram(b),!e.getProgramParameter(b,e.LINK_STATUS))throw e.getProgramInfoLog(b)},b.use=function(){e.useProgram(b)},b.validate=function(){e.validateProgram(b)},b.getValidateStatus=function(){return e.getProgramParameter(b,e.VALIDATE_STATUS)},b.validateOrThrow=function(){if(e.validateProgram(b),!e.getProgramParameter(b,e.VALIDATE_STATUS))throw"program validation failed."},b.getActiveAttrib=function(a){return e.getActiveAttrib(b,a)},b.getNumberOfActiveAttributes=function(){return e.getProgramParameter(b,e.ACTIVE_ATTRIBUTES)},b.getActiveUniform=function(a){return e.getActiveUniform(b,a)},b.getNumberOfActiveUniforms=function(){return e.getProgramParameter(b,e.ACTIVE_UNIFORMS)},b.getAttribLocation=function(a){return e.getAttribLocation(b,a)},b.getUniform=function(a){return"string"!=typeof a?e.getUniform(b,a):e.getUniform(b,c[a]||(c[a]=e.getUniformLocation(b,a)))},b.getUniformLocation=a,b.uniform=function(b){for(var c in b)b.hasOwnProperty(c)&&e["uniform"+b[c].type](a(c),b[c].value)},b.uniform1f=function(b,c){e.uniform1f(a(b),c)},b.uniform2f=function(b,c,d){e.uniform2f(a(b),c,d)},b.uniform3f=function(b,c,d,f){e.uniform3f(a(b),c,d,f)},b.uniform4f=function(b,c,d,f,g){e.uniform4f(a(b),c,d,f,g)},b.uniform1fv=function(b,c){e.uniform1fv(a(b),c)},b.uniform2fv=function(b,c){e.uniform2fv(a(b),c)},b.uniform3fv=function(b,c){e.uniform3fv(a(b),c)},b.uniform4fv=function(b,c){e.uniform4fv(a(b),c)},b.uniform1i=function(b,c){e.uniform1i(a(b),c)},b.uniform2i=function(b,c,d){e.uniform2i(a(b),c,d)},b.uniform3i=function(b,c,d,f){e.uniform3i(a(b),c,d,f)},b.uniform4i=function(b,c,d,f,g){e.uniform4i(a(b),c,d,f,g)},b.uniform1iv=function(b,c){e.uniform1iv(a(b),c)},b.uniform2iv=function(b,c){e.uniform2iv(a(b),c)},b.uniform3iv=function(b,c){e.uniform3iv(a(b),c)},b.uniform4iv=function(b,c){e.uniform4iv(a(b),c)},b.uniformVec2=function(b,c){e.uniform2f(a(b),c.x,c.y)},b.uniformVec3=function(b,c){e.uniform3f(a(b),c.x,c.y,c.z)},b.uniformVec4=function(b,c){e.uniform2f(a(b),c.x,c.y,c.z,c.w)},b.uniformMatrix2fv=function(b,c){e.uniformMatrix2fv(a(b),!1,c)},b.uniformMatrix3fv=function(b,c){e.uniformMatrix3fv(a(b),!1,c)},b.uniformMatrix4fv=function(b,c){e.uniformMatrix4fv(a(b),!1,c)},b.uniformMat2=function(b,c){e.uniformMatrix2fv(a(b),!1,[c[0],c[1],c[2],c[3]])},b.uniformMat3=function(b,c){e.uniformMatrix3fv(a(b),!1,[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8]])},b.uniformMat4=function(b,c){e.uniformMatrix4fv(a(b),!1,[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]])},b._delete=function(){e.deleteProgram(b)},b.getDeleteStatus=function(){return e.getProgramParameter(b,e.DELETE_STATUS)},b},e.AutoProgram=function(a,b,c){var d=new e.Program,f=new e.VertexShader(a),g=new e.FragmentShader(b);return d.getVertexShader=function(){return f},d.getFragmentShader=function(){return g},d.attachShader(f),d.attachShader(g),d.bindAttribLocations(c),d.linkOrThrow(),d},e.AjaxProgram=function(a,b,d){var f=new e.Program;return c.Ajax.get(a+".vert",function(g){var h=new e.VertexShader(g);f.attachShader(h),c.Ajax.get(a+".frag",function(a){var c=new e.FragmentShader(a);f.attachShader(c),f.getVertexShader=function(){return h},f.getFragmentShader=function(){return c},f.bindAttribLocations(b),f.linkOrThrow(),d&&d.call(f)})}),f},e.Framebuffer=function(){var a=e.createFramebuffer();return a.is=function(){return e.isFramebuffer(a)},a.getAttachmentParameter=function(a,b){return e.getFramebufferAttachmentParameter(e.FRAMEBUFFER,a,b)},a.bind=function(){e.bindFramebuffer(e.FRAMEBUFFER,a)},a.checkStatus=function(){return e.checkFramebufferStatus(e.FRAMEBUFFER)},a.renderbuffer=function(a,b){e.framebufferRenderbuffer(e.FRAMEBUFFER,a,e.RENDERBUFFER,b)},a.texture2D=function(a,b,c,d){e.framebufferTexture2D(e.FRAMEBUFFER,a,b,c,d)},a._delete=function(){e.deleteFramebuffer(a)},a},e.Renderbuffer=function(){var a=e.createRenderbuffer();return a.is=function(){return e.isRenderbuffer(a)},a.getParameter=function(a){return e.getRenderbufferParameter(e.RENDERBUFFER,a)},a.getWidth=function(){return e.getRenderbufferParameter(e.RENDERBUFFER,e.RENDERBUFFER_WIDTH)},a.getHeight=function(){return e.getRenderbufferParameter(e.RENDERBUFFER,e.RENDERBUFFER_HEIGHT)},a.getInternalFormat=function(){return e.getRenderbufferParameter(e.RENDERBUFFER,e.RENDERBUFFER_INTERNAL_FORMAT)},a.getRedSize=function(){return e.getRenderbufferParameter(e.RENDERBUFFER,e.RENDERBUFFER_RED_SIZE)},a.getGreenSize=function(){return e.getRenderbufferParameter(e.RENDERBUFFER,e.RENDERBUFFER_GREEN_SIZE)},a.getBlueSize=function(){return e.getRenderbufferParameter(e.RENDERBUFFER,e.RENDERBUFFER_BLUE_SIZE)},a.getAlphaSize=function(){return e.getRenderbufferParameter(e.RENDERBUFFER,e.RENDERBUFFER_ALPHA_SIZE)},a.getDepthSize=function(){return e.getRenderbufferParameter(e.RENDERBUFFER,e.RENDERBUFFER_DEPTH_SIZE)},a.getStencilSize=function(){return e.getRenderbufferParameter(e.RENDERBUFFER,e.RENDERBUFFER_STENCIL_SIZE)},a.bind=function(){e.bindRenderbuffer(e.RENDERBUFFER,a)},a.storage=function(a,b,c){e.renderbufferStorage(e.RENDERBUFFER,a,b,c)},a._delete=function(){e.deleteRenderbuffer(a)},a},e},c.RenderLoop=function(){var a="auto",b=60,c=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,e=function(a,b){var e=Math.floor(1e3/b);
return function(f){function g(){var a=null;this.start=function(){null===a&&(a=c(function b(){n++,f(),a=c(b)}))},this.stop=function(){null!==a&&(d(a),a=null)}}function h(){var a=null;this.start=function(){null===a&&(a=setInterval(function(){n++,f()},e))},this.stop=function(){null!==a&&(clearInterval(a),a=null)}}var i,j,k,l=!1,m=!1,n=0,o=0;switch(a){case"request":k=new g;break;case"interval":k=new h;break;default:c?(a="request",k=new g):(a="interval",k=new h)}this.getType=function(){return a},this.getRate=function(){return b},this.getPeriod=function(){return e},this.getActualRate=function(){var a;a=m?j:Date.now();var b=n/(a-i-o);return n=0,i=a,o=0,b},this.start=function(){l||m||(l=!0,i=Date.now(),k.start())},this.suspend=function(){l&&(m=!0,j=Date.now(),k.stop())},this.resume=function(){l&&(m=!1,o+=Date.now()-j,k.start())},this.stop=function(){l=!1,m=!0,j=Date.now(),k.stop()}}}(a,b);return e.isRequestAnimationFrameSupported=function(){return!!c},e.getType=function(){return a},e.setType=function(b){if(!{request:!0,interval:!0,auto:!0}.hasOwnProperty(a))throw"invalid loop type, must be one of `request`, `interval` or `auto`.";a=b},e.getRate=function(){return b},e.getPeriod=function(){return Math.floor(1e3/b)},e.setRate=function(a){b=a},e}()}({},function(){return this}());